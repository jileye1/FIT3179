{
  "config": {"view": {"continuousWidth": 400, "continuousHeight": 300}},
  "hconcat": [
    {
      "layer": [
        {
          "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"},
          "height": 300,
          "projection": {"type": "albersUsa"},
          "width": 500
        },
        {
          "mark": "geoshape",
          "encoding": {
            "color": {
              "condition": {
                "type": "quantitative",
                "field": "Violent",
                "legend": {"title": "Crimes/100k People"},
                "scale": {"scheme": "reds"},
                "selection": "selector001"
              },
              "value": "lightgrey"
            },
            "tooltip": [
              {"type": "nominal", "field": "properties.name", "title": "State"},
              {
                "type": "quantitative",
                "field": "Violent",
                "title": "Violent Crime rate/100k"
              }
            ]
          },
          "height": 300,
          "projection": {"type": "albersUsa"},
          "selection": {"selector001": {"type": "single", "encodings": ["color"]}},
          "transform": [
            {
              "lookup": "properties.name",
              "from": {
                "data": {
                  "url": "https://raw.githubusercontent.com/jileye1/FIT3179/main/data/crime_state_data.csv"
                },
                "key": "State",
                "fields": ["Violent"]
              }
            }
          ],
          "width": 500
        },
        {
          "mark": "circle",
          "encoding": {
            "color": {"value": "white"},
            "latitude": {
              "field": "properties.latitude",
              "type": "quantitative"
            },
            "longitude": {
              "field": "properties.longitude",
              "type": "quantitative"
            }
          }
        },
        {
          "mark": {"type": "text", "dy": -10},
          "encoding": {
            "color": {"value": "black"},
            "latitude": {
              "field": "properties.latitude",
              "type": "quantitative"
            },
            "longitude": {
              "field": "properties.longitude",
              "type": "quantitative"
            },
            "text": {"type": "nominal", "field": "properties.postal"}
          }
        }
      ],
      "data": {
        "url": "https://raw.githubusercontent.com/jileye1/FIT3179/main/js/us_states.topojson",
        "format": {"feature": "us_states.topojson", "type": "topojson"}
      }
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/jileye1/FIT3179/main/data/crime_state_data.csv"
      },
      "mark": {"type": "circle", "opacity": 0.8},
      "encoding": {
        "color": {
          "condition": {
            "type": "nominal",
            "field": "State",
            "legend": null,
            "selection": "selector001"
          },
          "value": "lightgray"
        },
        "size": {
          "type": "quantitative",
          "field": "PopDens",
          "legend": {"title": "Population Density"},
          "scale": {"range": [0, 1200]}
        },
        "tooltip": [
          {"type": "nominal", "field": "State", "title": "State"},
          {
            "type": "quantitative",
            "field": "Unemployment",
            "title": "Unemployment rate"
          },
          {
            "type": "quantitative",
            "field": "Violent",
            "title": "Crime Rate"
          },
          {
            "type": "quantitative",
            "field": "PopDens",
            "title": "Population Density"
          }
        ],
        "x": {
          "type": "quantitative",
          "axis": {"labelAngle": 0},
          "field": "Violent",
          "title": "Violent Crime Rate"
        },
        "y": {
          "type": "quantitative", 
          "field": "Unemployment",
          "title": "Unemployment Rate",
          "axis":{
            "labelAngle": 0
          }
          }
      },
      "height": 300,

      "width": 450
    }
  ],
  "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json"
}